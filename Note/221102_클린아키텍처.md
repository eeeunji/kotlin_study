# Clean Architecture (클린 아키텍처)

기존의 계층형 아키텍처가 가지던 의존성에서 벗어나도록 하는 설계 제공

## 개념

계층을 크게 나누어서 관심사를 분리하고, 분리된 클래스가 한가지 역할만 하게끔 구현하는 방식.  
구조에서 외부에서 내부로 의존성을 가지고 있어서, 내부로 갈수록 의존성이 낮아진다.

> ❔의존성?  
> : 서비스로 사용할 수 있는 객체.  
>  클라이언트가 어떤 서비스를 사용할 것인지 지정하는 대신, 무슨 서비스를 사용할 것인지 말해주는 것

어떤 동작을 할 때, 자기보다 내부 계층이 변화하면, 동작을 행하는 계층에 영향이 있을수도 있지만 (의존성이 있지만),  
자신의 외부에 있는 계층이 변화하는 것 때문에 동작을 행하는 계층에 영향이 있어서는 안된다. (의존성이 없다)

<br></br>

음, 그니까 가장 내부가 A, 가장 외부가 D라고 치면, A가 변화 하게 되면 D에 영향이 있을 수 있다.  
하지만, D가 변하면 A는 아무 영향이 없어야 한다.  
즉, D는 의존성이 높고, A는 의존성이 낮다라는 뜻..!!!

- 쉽게 구조 탐색 가능
- 유지 보수 편리
- 기능 추가 시, 빠르게 적용 가능

## Domain

- 의존성을 가지고 있지 않은 계층 (가장 내부)
- Data Model과 UseCase가 포함되어 있는 계층

> ❔UseCase?
>
> 서비스를 사용하고 있는 사용자가 해당 서비스를 통해 하고자 하는 것을 의미.  
> 블로그라는 서비스에 검색, 댓글, 공유 같은 것 = UseCase  
>
> 사용하는 이유
>
> 1. ViewModel이 어떤 것을 하고자 하는지 직관적으로 파악 가능
>
>    - 이름은 직관적으로
>
>    - Vm에서 파라미터로 전달하니 이것만 확인해도 대충 파악 가능
>
> 2. 의존성 감소 (변경 최소화) 
>
>    - 위에서 만약 UseCase를 사용하지 않으면 VM에선 Repository를 전달 받아서 사용
>    - 그런데  Repository가 수정되면? .....ㅠㅠ

## Data

- Dmain 계층에 의존성을 가진 계층
- data들을 컨트롤하는 계층
- API 통신과 내부 DB, DAO 등
- 외부, 내부 데이터를 사용하기 위한 Repository와 구현부

## Presentation

- Data 계층과 Domain 계층에 의존성을 가진 계층
- 화면과 입력에 대한 처리 등
- UI, VM, Module 등

<br></br>

![02.png](https://image.toast.com/aaaadh/real/2022/techblog/02%282%29.png)

![03.png](https://image.toast.com/aaaadh/real/2022/techblog/03%283%29.png)

이때 2번 사진 데이터 계층에 있는 엔티티는 1번 사인의 도메인 계층에 있는 엔티티가 아니라!!!!  
네트워크나 로컬 DB에서 받아온 DTO를 의미한다.  
약간 계층을 횡단할 때 해당 계층에 맞게 데이터를 변환시켜야한다는 것 같다...  어렵.
